<?xml version="1.0"?>
<!DOCTYPE cxchelptopics SYSTEM "CXCHelp.dtd" >
<cxchelptopics>
  <ENTRY key="install_marx" context="Tools::Download"
         refkeywords="marx chart PSF point spread function simulation simulate saotrace ray trace raytrace HRMA gratings TG LETG LEG MEG HEG HETG ACIS HRC PRF"
         seealsogroups="psftools"
         displayseealsogroups="" 
         >
    <SYNOPSIS>
    Automatically download and install MARX
    </SYNOPSIS>

    <DESC>
      <PARA>
        This script can be used to download and install the latest
        version of MARX.  From
        the MARX website:
        </PARA>
         <!-- taken verbatim from MIT page -->
 <PARA>
        marx is a suite of programs created and maintained by the 
        MIT/CXC/HETG group group and is designed to enable the user to 
        simulate the on-orbit performance of the Chandra X-ray Observatory. 
        marx provides a detailed ray-trace simulation of how Chandra 
        responds to a variety of astrophysical sources and can generate 
        standard FITS event files and images as output. It contains 
        detailed models for Chandra's High Resolution Mirror 
        Assembly (HRMA), the HETG and LETG gratings, and all the 
        focal plane detectors.
</PARA>

      <PARA>
        marx can also use the <HREF link="https://cxc.cfa.harvard.edu/cal/Hrma/SAOTrace.html">SAOTrace</HREF>
        ray files generated by
         <HREF link="https://cxc.harvard.edu/chart">ChaRT</HREF>.
      </PARA>

      <PARA>
        If users experience problems during the installation, please
        contact the MARX support team at marx-help@space.mit.edu.
        Users can find instructions for how to run MARX 
        on the <HREF link="https://space.mit.edu/ASC/MARX">MARX home page</HREF>.
      </PARA>

      <PARA>
        This script only works with the latest version of MARX.
        Users who require the a different version must install it manually.      
      </PARA>


    </DESC>
    
    <QEXAMPLELIST>
      <QEXAMPLE>
          <SYNTAX>
            <LINE>unix% install_marx /soft/marx</LINE>
          </SYNTAX>
          <DESC>
            <PARA>
            The script will automatically download the
            version of MARX via FTP from the MIT site and the
            will build and install it from source.            
            Users need to have standard compilers (ie gcc) installed
            along with either  wget or the lwp-download.
            </PARA>          
<VERBATIM>
--2015-12-14 12:54:03--  ftp://space.mit.edu/pub/cxc/marx/v5.2/marx-dist-5.2.0.tar.gz
           => `marx-dist-5.2.0.tar.gz'
Resolving space.mit.edu... 18.75.0.10
Connecting to space.mit.edu|18.75.0.10|:21... connected.
Logging in as anonymous ... Logged in!
==> SYST ... done.    ==> PWD ... done.
==> TYPE I ... done.  ==> CWD (1) /pub/cxc/marx/v5.2 ... done.
==> SIZE marx-dist-5.2.0.tar.gz ... 12018160
==> PASV ... done.    ==> RETR marx-dist-5.2.0.tar.gz ... done.
Length: 12018160 (11M) (unauthoritative)

2015-12-14 12:54:06 (4.87 MB/s) - `marx-dist-5.2.0.tar.gz' saved [12018160]

checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
...

</VERBATIM>

<PARA>
Some users, especially Mac OSX, may need to set special environment variables depending
on their setup (CC, CFLAGS, LDFLAGS, etc).  Please consult the 
<HREF link="https://space.mit.edu/ASC/MARX/inbrief/install.html">MARX
installation page</HREF> for assistance.
</PARA>
<PARA>
After successfully building and installing MARX users will be provided
instructions on how to setup the package:
</PARA>
<VERBATIM>
...
Builds are complete.  

For MARX documentation and support please visit 
https://space.mit.edu/ASC/MARX/


To setup for this installation:

setenv MARX_ROOT /soft/marx/marx-5.2.0
setenv MARX_DATA_DIR ${MARX_ROOT}/share/marx/data
setenv PATH ${PATH}:${MARX_ROOT}/bin
setenv PFILES ${PFILES}:$MARX_ROOT/share/marx/pfiles

These commands are scripted in 

(t)csh: source /soft/marx/setup_marx.csh
bash: source /soft/marx/setup_marx.sh

</VERBATIM>

<PARA>


</PARA>


          </DESC>
      </QEXAMPLE>
    </QEXAMPLELIST>

    <PARAMLIST>
      <PARAM name="installdir" type="file" filetype="output" reqd="no">
        <SYNOPSIS>Installation directory</SYNOPSIS>
        <DESC>
          <PARA>The top level directory to install MARX.  The actual
          installation will be in a version-numbered sub-directory.</PARA>
          <PARA>
           If no directory is specified, the script will attempt to install
           marx into CIAO's $ASCDS_INSTALL root directory.          
          </PARA>

        </DESC>
      
      </PARAM>
    </PARAMLIST>

   <ADESC title="Changes in scripts 4.13.2 release (June 2021)">
   <PARA>
   Create a "marx" symbolic link to the version specific 
    installation directory (eg "marx-5.5.1").
   </PARA>
   </ADESC>


    <ADESC title="Changes in scripts CIAO 4.11.5 (October 2019) release">
      <PARA>
        Change the (t)csh setup script to work around bug in conda 
        environment.
      </PARA>
    </ADESC>


    <ADESC title="Change in scripts CIAO 4.11.2 (April 2019) release">
      <PARA>
        Run make clean after successful installation.
      </PARA>
    </ADESC>


    <ADESC title="Changes in scripts CIAO 4.10.1 (April 2018) release">
      <PARA>
        Updated to make sure that bash shell is used due to incompatibility
        with dash shell.
      </PARA>    
    </ADESC>

    <ADESC title="Changes in the scripts 4.9.2 (April 2017) release">
      <PARA>
        Fix for a problem when using Python 3.      
      </PARA>    
    </ADESC>

    <ADESC title="Changes in scripts CIAO 4.8.4 (September 2016) release">
      <PARA>
        Corrects the export of the MARX_DATA_DIR environment variable 
        in the bash setup script.
      </PARA>
    
    
    </ADESC>
    
    <ADESC title="Changes in scripts CIAO 4.8.3 (April 2016) release">
      <PARA>
        The script will now try to install the latest version of MARX available
        on the MARX FTP site.      
      </PARA>
      <PARA>
        If no installation directory is supplied, the script will try to 
        install MARX into CIAO root directory, $ASCDS_INSTALL.
      </PARA>
        <PARA>
        Users are now prompted to continue before the installation occurs.
        </PARA>
    
    </ADESC>


    <ADESC title="About Contributed Software">
      <PARA>
        This script is not an official part of the CIAO release but is
        made available as "contributed" software via the
        <HREF link="https://cxc.harvard.edu/ciao/download/scripts/">CIAO scripts page</HREF>.
        Please see this page for installation instructions.
      </PARA>
    </ADESC>

    <BUGS>

      <PARA>
        See the
        <HREF link="https://cxc.harvard.edu/ciao/bugs/install_marx.html">bug
        pages</HREF>
        on the CIAO website for an up-to-date listing of known bugs.
      </PARA>
    </BUGS>
    
    <LASTMODIFIED>December 2022</LASTMODIFIED>
  </ENTRY>
</cxchelptopics>

    
